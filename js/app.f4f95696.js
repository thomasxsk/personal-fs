(function(t){function e(e){for(var n,i,r=e[0],c=e[1],l=e[2],d=0,m=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&m.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([1,"chunk-vendors"]),a()})({0:function(t,e){},"034f":function(t,e,a){"use strict";var n=a("85ec"),s=a.n(n);s.a},1:function(t,e,a){t.exports=a("56d7")},2:function(t,e){},3:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"eventBus",(function(){return St}));a("4160"),a("45fc"),a("159b"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"text-right"},[t._v("Login: "+t._s(t.isLoggedIn)+" Admin: "+t._s(t.isAdmin))]),a("nav",{staticClass:"navbar sticky-top navbar-expand-sm navbar-dark bg-success"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("Personal FS")]),t._m(0),a("div",{staticClass:"collapse navbar-collapse justify-content-between",attrs:{id:"mainNav"}},[a("div",{staticClass:"navbar-nav"},[t.isLoggedIn?a("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/"}},[t._v("Home")]):t._e(),t.isLoggedIn?a("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/add"}},[t._v("Add New")]):t._e(),t.isLoggedIn&&t.isAdmin?a("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/categories"}},[t._v("Categories")]):t._e(),t.isLoggedIn&&t.isAdmin?a("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/tags"}},[t._v("Tags")]):t._e(),t.isLoggedIn&&t.isAdmin?a("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/admin"}},[t._v("Admin")]):t._e()],1),a("div",{staticClass:"navbar-nav"},[t.isLoggedIn?t._e():a("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/login"}},[t._v("Login")]),t.isLoggedIn?t._e():a("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/signup"}},[t._v("Sign Up")]),t.isLoggedIn?a("div",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" User: "+t._s(t.username)+" ")]),a("div",{staticClass:"dropdown-menu"},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.logout()}}},[t._v("Logout")])])]):t._e()],1)])]),a("router-view",{attrs:{"current-user":t.username}})],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#mainNav","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],i=(a("ac1f"),a("5319"),a("59ca")),r=a.n(i);a("e71f"),a("ea7b");console.log("Hello from firebaseinit.js");var c={apiKey:"AIzaSyCfL3xooomPw0kE-PdjF5PTzBnl0SYQ1a8",authDomain:"rainmaker-cc274.firebaseapp.com",databaseURL:"https://rainmaker-cc274.firebaseio.com",projectId:"rainmaker-cc274",storageBucket:"rainmaker-cc274.appspot.com",messagingSenderId:"599101569334",appId:"1:599101569334:web:48a31ed7fb0c68197e5b97",measurementId:"G-VB7Z2X8Y4H"};r.a.initializeApp(c);var l=r.a.firestore(),u=r.a.auth(),d={name:"App",components:{},data:function(){return{username:null,isLoggedIn:null,isAdmin:null}},methods:{logout:function(){var t=this;console.log("logged out"),u.signOut().then((function(){t.$router.replace("/login")}))}},created:function(){var t=this;u.onAuthStateChanged((function(e){e?(console.log("Already logged in"),console.log("User: ".concat(e.email)),t.isLoggedIn=!0,l.collection("Users").where("uuid","==",e.uid).get().then((function(e){e.forEach((function(e){t.isAdmin=e.data().admin,t.username=e.id}))}))):(console.log("Please sign in"),t.isLoggedIn=!1)}))}},m=d,p=(a("034f"),a("2877")),v=Object(p["a"])(m,s,o,!1,null,null,null),g=v.exports,f=a("8c4f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("h1",[t._v("HOME")]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dateChoice,expression:"dateChoice"}],staticClass:"form-check-input",attrs:{type:"radio",id:"monthDate",name:"selectDate",value:"1"},domProps:{checked:t._q(t.dateChoice,"1")},on:{change:function(e){t.dateChoice="1"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"monthDate"}},[t._v("เลือกดูเป็นเดือน")])]),1==t.dateChoice?a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedMonth.year,expression:"selectedMonth.year"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectedMonth,"year",e.target.multiple?a:a[0])}}},t._l(t.oldYear,(function(e){return a("option",{key:e},[t._v(t._s(e))])})),0)])]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedMonth.month,expression:"selectedMonth.month"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectedMonth,"month",e.target.multiple?a:a[0])}}},t._l(t.monthArray,(function(e){return a("option",{key:e,domProps:{value:t.monthArray.indexOf(e)}},[t._v(t._s(e))])})),0)])])]):t._e(),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.dateChoice,expression:"dateChoice"}],staticClass:"form-check-input",attrs:{type:"radio",id:"rangeDate",name:"selectDate",value:"2"},domProps:{checked:t._q(t.dateChoice,"2")},on:{change:function(e){t.dateChoice="2"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"rangeDate"}},[t._v("เลือกวันเอง")])]),2==t.dateChoice?a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("input",{staticClass:"form-control",attrs:{type:"date"},on:{input:function(e){t.selectedRange.start=e.target.value}}})])]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("input",{staticClass:"form-control",attrs:{type:"date"},on:{input:function(e){t.selectedRange.end=e.target.value}}})])])]):t._e(),a("button",{staticClass:"btn btn-primary",staticStyle:{"margin-top":"15px","margin-bottom":"15px"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.submitDate()}}},[t._v("ยืนยันวันที่")]),1==t.display?a("div",[a("p",[t._v("ข้อมูลของวันที่ "+t._s(t.dateFormat(t.dateFilter.start))+" ถึง "+t._s(t.dateFormat(t.dateFilter.end))+" ")]),a("p",[t._v("Filtered Balance : "+t._s(t.sumFiltered)+" THB")]),a("div",[a("div",[t._v("Search Box")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control",staticStyle:{"margin-top":"15px","margin-bottom":"15px"},attrs:{type:"search",placeholder:"search for transaction"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),a("p",[t._v("Data List: "),a("button",{staticClass:"btn btn-secondary",staticStyle:{float:"right"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.writeXlsx()}}},[t._v("Export")])]),t._l(t.filteredResult,(function(e){return a("div",{key:e.id,staticClass:"card"},[a("div",{staticClass:"card-header"},[a("button",{staticClass:"btn btn-block p-0",attrs:{"data-toggle":"collapse","data-target":"#collapse-"+e.id}},[a("div",{staticClass:"d-flex flex-row flex-wrap justify-content-around"},[a("div",{staticClass:"col-md-3 col-sm-3 col-12 p-0 text-left"},[t._v(t._s(t.dateFormat(e.date)))]),a("div",{staticClass:"col-md col-sm col-8 p-0 text-left"},[t._v(t._s(e.desc))]),a("div",{staticClass:"col-md-2 col-sm-3 col-4 p-0 pr-4 text-right",attrs:{id:"cell-amount"}},[t._v(t._s(t.numberFormat(t.signDisplay(e))))]),a("div",{staticClass:"col-md-3 col-12 p-0 text-left",attrs:{id:"cell-badge"}},t._l(e.tags,(function(e){return a("span",{key:e,staticClass:"badge badge-info",staticStyle:{"margin-right":"5px"}},[t._v(t._s(e))])})),0)])])]),a("div",{staticClass:"collapse",attrs:{id:"collapse-"+e.id}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"d-flex flex-row flex-wrap justify-content-around"},[a("div",{staticClass:"col p-0"},[a("div",[t._v("Type: "+t._s(e.type.name))]),a("div",[t._v("Method: "+t._s(e.method))])]),a("div",{staticClass:"col-4 p-0 text-right"},[a("span",[a("button",{staticClass:"btn btn-secondary",on:{click:function(a){return t.$router.push({path:"/view/"+e.id})}}},[t._v("view")])]),a("span",[a("button",{staticClass:"btn btn-danger",on:{click:function(a){return a.preventDefault(),t.deleteTransaction(e.id)}}},[t._v("delete")])])])])])])])}))],2):t._e()])},y=[],b=(a("99af"),a("4de4"),a("c975"),a("fb6a"),a("b0c0"),a("a9e3"),a("d3b7"),a("25f0"),a("466d"),a("b85c")),_=a("1146"),C=a.n(_),w={name:"HelloWorld",props:{msg:String},data:function(){return{transactions:[],searchText:"",monthArray:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],selectedMonth:{year:(new Date).getFullYear(),month:(new Date).getMonth()},selectedRange:{start:null,end:null},dateFilter:{start:new Date(2020,0,1),end:new Date(2021,0,0,23,59,59,999)},dateChoice:"1",display:1}},computed:{oldYear:function(){for(var t=[],e=0;e<=2;e++)t.push(this.selectedMonth.year-e);return t},dateMonth:function(){var t={start:new Date(this.selectedMonth.year,this.selectedMonth.month,1),end:new Date(this.selectedMonth.year,this.selectedMonth.month+1,0,23,59,59,999)};return t},dateRange:function(){return{start:new Date(new Date(this.selectedRange.start).setHours(0,0,0,0)),end:new Date(new Date(this.selectedRange.end).setHours(23,59,59,999))}},sumAmount:function(){for(var t=this.transactions,e=0,a=0;a<t.length;a++)""!==t[a].type.sign?e+=this.signDisplay(t[a]):console.log("ERROR: Direction of ".concat(a," = ").concat(t[a].type.sign));return this.numberFormat(e)},sumFiltered:function(){for(var t=this.filteredResult,e=0,a=0;a<t.length;a++)""!==t[a].type.sign?e+=this.signDisplay(t[a]):console.log("ERROR: Direction = ".concat(t[a].type.sign));return this.numberFormat(e)},filteredResult:function(){var t=this,e=this.transactions.filter((function(e){var a=[];a.push(e.desc);var n,s=Object(b["a"])(e.tags);try{for(s.s();!(n=s.n()).done;){var o=n.value;a.push(o)}}catch(l){s.e(l)}finally{s.f()}for(var i=0,r=a;i<r.length;i++){var c=r[i];if(c.toUpperCase().match(t.searchText.toUpperCase())&&e.date>t.dateFilter.start&&e.date<t.dateFilter.end)return!0}return!1}));return e}},methods:{deleteTransaction:function(t){var e=this;console.log("You clicked DELETE button of ".concat(t)),l.collection("Transaction").doc(t).delete().then((function(){return e.getTransaction()}))},getTransaction:function(){var t=this;console.log("You called method : getTransaction ...");var e=[];l.collection("Transaction").get().then((function(a){a.forEach((function(t){var a={id:t.id,date:t.data().date.toDate(),desc:t.data().desc,amount:t.data().amount,type:t.data().type,method:t.data().method,tags:t.data().tags};e.push(a)})),t.transactions=e.sort(t.compareDate),console.log("@refresh"),console.log(JSON.stringify(t.transactions))}))},compareDate:function(t,e){return t.date-e.date},dateFormat:function(t){var e=("0"+t.getDate()).slice(-2),a=("0"+(t.getMonth()+1)).slice(-2),n=t.getFullYear();return"".concat(e,"/").concat(a,"/").concat(n)},numberFormat:function(t){return new Intl.NumberFormat("th-TH",{minimumFractionDigits:2}).format(t)},signDisplay:function(t){return Number(t.amount)*t.type.sign},submitDate:function(){console.log("@submitDate choice ".concat(this.dateChoice)),console.log("Current time"),console.log("Start = ".concat(this.dateFilter.start)),console.log("End = ".concat(this.dateFilter.end));var t=[];switch(this.dateChoice){case"1":t=this.dateMonth;break;case"2":t=this.dateRange;break}"[object Date]"===Object.prototype.toString.call(t.start)&&"[object Date]"===Object.prototype.toString.call(t.end)?(this.dateFilter=t,this.display=1):(this.display=0,alert("Please enter correct date"),console.log("Start = ".concat(t.start)),console.log("End = ".concat(t.end))),console.log("New time"),console.log("Start = ".concat(this.dateFilter.start)),console.log("End = ".concat(this.dateFilter.end))},writeXlsx:function(){var t=C.a.utils.book_new(),e=[];this.transactions.forEach((function(t){var a="";t.tags.forEach((function(e){0===t.tags.indexOf(e)?a+=e:a+=","+e}));var n={Date:t.date,Desc:t.desc,Amount:t.amount,Type:t.type.name,Method:t.method,Tags:a};e.push(n)})),console.log(JSON.stringify(e));var a=C.a.utils.json_to_sheet(e);C.a.utils.book_append_sheet(t,a,"test"),C.a.writeFile(t,"sheetjs.xlsx")}},created:function(){var t=this;console.log("First time downloading database ...");var e=[];l.collection("Transaction").get().then((function(a){a.forEach((function(t){var a={id:t.id,date:t.data().date.toDate(),desc:t.data().desc,amount:t.data().amount,type:t.data().type,method:t.data().method,tags:t.data().tags};e.push(a)})),t.transactions=e.sort(t.compareDate)}))}},D=w,x=(a("ca95"),Object(p["a"])(D,h,y,!1,null,"1d23df47",null)),k=x.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("h1",[t._v("This is add page")]),a("p",[t._v("If you want to add multiple transactions "),a("span",[a("router-link",{attrs:{to:"/upload"}},[t._v(" Upload ")])],1)]),a("div",{staticStyle:{"margin-top":"30px","margin-bottom":"30"}},[a("form",{attrs:{id:"myform"},on:{submit:function(e){return e.preventDefault(),t.toggleModal()}}},[a("div",{staticClass:"form-group"},[a("label",[t._v("Input Date:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newTransaction.date,expression:"newTransaction.date"}],staticClass:"form-control",attrs:{type:"date",required:""},domProps:{value:t.newTransaction.date},on:{input:function(e){e.target.composing||t.$set(t.newTransaction,"date",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("Input Desc:")]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.newTransaction.desc,expression:"newTransaction.desc",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{required:""},domProps:{value:t.newTransaction.desc},on:{change:function(e){return t.$set(t.newTransaction,"desc",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("Input Amount:")]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.newTransaction.amount,expression:"newTransaction.amount",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.newTransaction.amount},on:{change:function(e){return t.$set(t.newTransaction,"amount",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("Input Type:")]),a("select",{directives:[{name:"model",rawName:"v-model.lazy",value:t.newTransaction.type,expression:"newTransaction.type",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newTransaction,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Please choose...")]),t._l(t.allCategories,(function(e){return a("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e.name)+" "+t._s(t.signDisplay(e.sign)))])}))],2)]),a("div",{staticClass:"form-group"},[a("label",[t._v("Input Method:")]),a("select",{directives:[{name:"model",rawName:"v-model.lazy",value:t.newTransaction.method,expression:"newTransaction.method",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newTransaction,"method",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Please choose...")]),t._l(t.categories.methods,(function(e){return a("option",{key:e},[t._v(t._s(e))])}))],2)]),a("div",{staticClass:"form-group"},[a("label",[t._v("Input Tags:")]),a("input",{staticClass:"form-control",attrs:{type:"text"},on:{keydown:t.addTag}}),a("div",t._l(t.newTransaction.tags,(function(e){return a("li",{key:e.id},[t._v(t._s(e)),a("span",{on:{click:function(a){t.removeTag(t.newTransaction.tags.indexOf(e))}}},[t._v(" (x) ")])])})),0)]),a("div",{staticClass:"form-group"},[a("label",[t._v("Notes:")]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.newTransaction.notes,expression:"newTransaction.notes",modifiers:{lazy:!0}}],staticClass:"form-control",domProps:{value:t.newTransaction.notes},on:{change:function(e){return t.$set(t.newTransaction,"notes",e.target.value)}}})]),a("p",[t._v("This transaction is creating by "+t._s(t.username))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$router.push("/")}}},[t._v("Cancel")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.resetData(e)}}},[t._v("Reset")])])]),a("div",{staticStyle:{"margin-top":"30px","margin-bottom":"30"}},[a("p",[t._v("Preview:")]),a("p",[t._v(t._s(t.newTransaction))])]),a("div",{staticClass:"modal",attrs:{tabindex:"-1",id:"submitConfirm"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Update Transaction")]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.closeModal()}}},[a("span",[t._v("×")])])]),t._m(0),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.addTransaction()}}},[t._v("Confirm")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.closeModal()}}},[t._v("Cancel")])])])])])])},S=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-body"},[a("p",[t._v("ยืนยันการสร้างรายการหรือไม่ ?")])])}];a("caad"),a("a434"),a("2532"),a("498a");window.onclick=function(t){var e=document.getElementById("submitConfirm");t.target==e&&(e.style.display="none")};var E={props:["currentUser"],data:function(){return{username:this.currentUser,newTransaction:{date:this.dateFormat(new Date),desc:"",amount:"",type:"",method:"",tags:[],notes:""},templateTransaction:{date:this.dateFormat(new Date),desc:"",amount:"",type:"",method:"",tags:[],notes:""},categories:[],allCategories:[]}},methods:{addTransaction:function(){var t=this;console.log("You clicked submit"),l.collection("Transaction").add({date:new Date(this.newTransaction.date),desc:this.newTransaction.desc,amount:Number(this.newTransaction.amount),type:this.newTransaction.type,method:this.newTransaction.method,tags:this.newTransaction.tags,notes:this.newTransaction.notes,lastUpdate:new Date,createdBy:this.username}).then((function(e){alert("your data is successfully added to database"),t.$router.push({path:"/view/".concat(e.id)})}))},dateFormat:function(t){var e=("0"+t.getDate()).slice(-2),a=("0"+(t.getMonth()+1)).slice(-2),n=t.getFullYear();return"".concat(n,"-").concat(a,"-").concat(e)},addTag:function(t){t.target.value.length>0&&("Enter"===t.key||" "===t.key||","===t.key)&&(t.preventDefault(),this.newTransaction.tags.includes(t.target.value)?alert("your tag is already existed = ".concat(t.target.value)):(console.log("you just added a tag = ".concat(t.target.value)),this.newTransaction.tags.push(t.target.value.trim()),t.target.value="",console.log(JSON.stringify(this.newTransaction.tags))))},removeTag:function(t){console.log("you just removed a tag = ".concat(this.newTransaction.tags[t]," index = ").concat(t)),this.newTransaction.tags.splice(t,1),console.log(JSON.stringify(this.newTransaction.tags))},resetData:function(){this.newTransaction=JSON.parse(JSON.stringify(this.templateTransaction))},signDisplay:function(t){return 1===t?"(+)":-1===t?"(-)":"unidentified"},toggleModal:function(){var t=document.getElementById("submitConfirm");t.style.display="block"},closeModal:function(){var t=document.getElementById("submitConfirm");t.style.display="none"}},created:function(){var t=this;l.collection("Categories").doc("Categories").get().then((function(e){var a={types:e.data().types,methods:e.data().methods};t.categories=JSON.parse(JSON.stringify(a))})),l.collection("itemCategories").get().then((function(e){e.forEach((function(e){var a={id:e.id,name:e.data().name,sign:e.data().sign};t.allCategories.push(a)}))}))}},N=E,O=Object(p["a"])(N,T,S,!1,null,null,null),U=O.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("h1",[t._v("This is view page")]),a("p",[t._v("your item:")]),a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("td",[t._v("Date")]),a("td",[t._v(t._s(t.dateFormat(t.transaction.date)))])]),a("tr",[a("td",[t._v("Description")]),a("td",[t._v(t._s(t.transaction.desc))])]),a("tr",[a("td",[t._v("Amount")]),a("td",[t._v(t._s(t.numberFormat(t.transaction.amount)))])]),a("tr",[a("td",[t._v("Type")]),a("td",[t._v(t._s(t.transaction.type.name))])]),a("tr",[a("td",[t._v("Sign")]),a("td",[t._v(t._s(t.transaction.type.sign))])]),a("tr",[a("td",[t._v("Method")]),a("td",[t._v(t._s(t.transaction.method))])]),a("tr",[a("td",[t._v("Tags")]),a("td",t._l(t.transaction.tags,(function(e){return a("span",{key:e,staticClass:"badge badge-info",staticStyle:{"margin-right":"5px"}},[t._v(t._s(e))])})),0)]),a("tr",[a("td",[t._v("Notes")]),a("td",[t._v(t._s(t.transaction.notes))])]),a("tr",[a("td",[t._v("Created")]),a("td",[t._v(t._s(t.transaction.createdBy))])]),a("tr",[a("td",[t._v("Edited")]),a("td",[t._v(t._s(t.transaction.editedBy))])]),a("tr",[a("td",[t._v("Last update")]),a("td",[t._v(t._s(t.transaction.lastUpdate))])])])]),a("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.$router.push({path:"/view/"+t.transaction.id+"/edit"})}}},[t._v("edit")]),a("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.toggleModal()}}},[t._v("delete")]),a("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.$router.push("/")}}},[t._v("back to home")]),a("div",{staticClass:"modal",attrs:{tabindex:"-1",id:"deleteConfirm"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Delete Transaction")]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.closeModal()}}},[a("span",[t._v("×")])])]),t._m(0),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.deleteTransaction()}}},[t._v("Confirm")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.closeModal()}}},[t._v("Cancel")])])])])])])},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-body"},[a("p",[t._v("ต้องการลบรายการใช่หรือไม่ ?")])])}];window.onclick=function(t){var e=document.getElementById("deleteConfirm");t.target==e&&(e.style.display="none")};var I={data:function(){return{checkid:this.$route.params.id,transaction:{date:new Date,type:{name:"",sign:""}}}},methods:{deleteTransaction:function(){var t=this;l.collection("Transaction").doc(this.transaction.id).delete().then((function(){alert("your data is successfully deleted"),t.$router.push("/")}))},dateFormat:function(t){var e=("0"+t.getDate()).slice(-2),a=("0"+(t.getMonth()+1)).slice(-2),n=t.getFullYear();return"".concat(e,"/").concat(a,"/").concat(n)},numberFormat:function(t){return new Intl.NumberFormat("th-TH",{minimumFractionDigits:2}).format(t)},toggleModal:function(){var t=document.getElementById("deleteConfirm");t.style.display="block"},closeModal:function(){var t=document.getElementById("deleteConfirm");t.style.display="none"}},created:function(){var t=this;l.collection("Transaction").doc(this.checkid).get().then((function(e){var a={id:e.id,date:e.data().date.toDate(),desc:e.data().desc,amount:e.data().amount,type:e.data().type,method:e.data().method,tags:e.data().tags,notes:e.data().notes,lastUpdate:e.data().lastUpdate.toDate(),createdBy:e.data().createdBy,editedBy:e.data().editedBy};t.transaction=a}))}},M=I,P=Object(p["a"])(M,A,F,!1,null,null,null),$=P.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("h1",[t._v("This is edit page")]),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.toggleModal()}}},[a("div",{staticClass:"form-group"},[a("label",[t._v("Input Date:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.transaction.date,expression:"transaction.date"}],staticClass:"form-control",attrs:{type:"date",required:""},domProps:{value:t.transaction.date},on:{input:function(e){e.target.composing||t.$set(t.transaction,"date",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("Input Desc:")]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.transaction.desc,expression:"transaction.desc",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{required:""},domProps:{value:t.transaction.desc},on:{change:function(e){return t.$set(t.transaction,"desc",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("Input Amount:")]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.transaction.amount,expression:"transaction.amount",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.transaction.amount},on:{change:function(e){return t.$set(t.transaction,"amount",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("Input Type:")]),a("select",{directives:[{name:"model",rawName:"v-model.lazy",value:t.transaction.type.name,expression:"transaction.type.name",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.transaction.type,"name",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Please choose...")]),t._l(t.allCategories,(function(e){return a("option",{key:e.id,domProps:{value:e.name}},[t._v(t._s(e.name)+" "+t._s(t.signDisplay(e.sign)))])}))],2)]),a("div",{staticClass:"form-group"},[a("label",[t._v("Input Method:")]),a("select",{directives:[{name:"model",rawName:"v-model.lazy",value:t.transaction.method,expression:"transaction.method",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.transaction,"method",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Please choose...")]),t._l(t.categories.methods,(function(e){return a("option",{key:e},[t._v(t._s(e))])}))],2)]),a("div",{staticClass:"form-group"},[a("label",[t._v("Input Tags:")]),a("input",{staticClass:"form-control",attrs:{type:"text"},on:{keydown:t.addTag}}),a("div",t._l(t.transaction.tags,(function(e){return a("li",{key:e.id},[t._v(t._s(e)),a("span",{on:{click:function(a){t.removeTag(t.transaction.tags.indexOf(e))}}},[t._v(" (x) ")])])})),0)]),a("div",{staticClass:"form-group"},[a("label",[t._v("Notes:")]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.transaction.notes,expression:"transaction.notes",modifiers:{lazy:!0}}],staticClass:"form-control",domProps:{value:t.transaction.notes},on:{change:function(e){return t.$set(t.transaction,"notes",e.target.value)}}})]),a("p",[t._v("This transaction is editing by "+t._s(t.username))]),a("p",{staticStyle:{"margin-top":"15px"}},[t._v("previous update : "+t._s(t.transaction.lastUpdate))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$router.go(-1)}}},[t._v("Cancel")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.resetData(e)}}},[t._v("Reset")])])]),a("div",{staticClass:"modal",attrs:{tabindex:"-1",id:"submitConfirm"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Update Transaction")]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.closeModal()}}},[a("span",[t._v("×")])])]),t._m(0),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.updateTransaction(e)}}},[t._v("Confirm")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.closeModal()}}},[t._v("Cancel")])])])])])])},L=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-body"},[a("p",[t._v("ยืนยันการแก้ไขรายการหรือไม่ ?")])])}];window.onclick=function(t){var e=document.getElementById("submitConfirm");t.target==e&&(e.style.display="none")};var J={props:["currentUser"],data:function(){return{username:this.currentUser,checkid:this.$route.params.id,transaction:{type:{name:"",sign:""},notes:""},currentVersion:[],categories:[],allCategories:[]}},methods:{updateTransaction:function(){console.log("You clicked submit"),console.log(JSON.stringify(this.transaction)),l.collection("Transaction").doc(this.transaction.id).update({date:new Date(this.transaction.date),desc:this.transaction.desc,amount:Number(this.transaction.amount),type:{name:this.transaction.type.name,sign:this.signOf(this.transaction.type.name)},method:this.transaction.method,tags:this.transaction.tags,notes:this.transaction.notes,lastUpdate:new Date,editedBy:this.username}),alert("your data is successfully updated"),this.$router.go("-1")},dateFormat:function(t){var e=("0"+t.getDate()).slice(-2),a=("0"+(t.getMonth()+1)).slice(-2),n=t.getFullYear();return"".concat(n,"-").concat(a,"-").concat(e)},signOf:function(t){for(var e=0;e<this.allCategories.length;e++)if(this.allCategories[e].name===t)return this.allCategories[e].sign;return"invalid"},addTag:function(t){t.target.value.length>0&&("Enter"===t.key||" "===t.key||","===t.key)&&(t.preventDefault(),this.transaction.tags.includes(t.target.value)?alert("your tag is already existed = ".concat(t.target.value)):(console.log("you just added a tag = ".concat(t.target.value)),this.transaction.tags.push(t.target.value.trim()),t.target.value="",console.log(JSON.stringify(this.transaction.tags))))},removeTag:function(t){console.log("you just removed a tag = ".concat(this.transaction.tags[t]," index = ").concat(t)),this.transaction.tags.splice(t,1),console.log(JSON.stringify(this.transaction.tags))},resetData:function(){this.transaction=JSON.parse(JSON.stringify(this.currentVersion))},signDisplay:function(t){return 1===t?"(+)":-1===t?"(-)":"unidentified"},toggleModal:function(){var t=document.getElementById("submitConfirm");t.style.display="block"},closeModal:function(){var t=document.getElementById("submitConfirm");t.style.display="none"}},created:function(){var t=this;l.collection("Transaction").doc(this.checkid).get().then((function(e){var a={id:e.id,date:t.dateFormat(e.data().date.toDate()),desc:e.data().desc,amount:e.data().amount,type:e.data().type,method:e.data().method,tags:e.data().tags,notes:e.data().notes,lastUpdate:""};null!=e.get("lastUpdate")&&(a.lastUpdate=e.data().lastUpdate.toDate()),t.currentVersion=JSON.parse(JSON.stringify(a)),t.transaction=JSON.parse(JSON.stringify(a)),console.log(JSON.stringify(t.transaction))})),l.collection("Categories").doc("Categories").get().then((function(e){var a={methods:e.data().methods};t.categories=JSON.parse(JSON.stringify(a))})),l.collection("itemCategories").get().then((function(e){e.forEach((function(e){var a={id:e.id,name:e.data().name,sign:e.data().sign};t.allCategories.push(a)}))}))}},B=J,q=Object(p["a"])(B,j,L,!1,null,null,null),R=q.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("h1",[t._v("New Transaction Upload")]),t._m(0),a("div",{staticStyle:{"margin-top":"40px"}},[a("h5",[t._v("Current File Input: "+t._s(t.currentFile))]),a("br"),a("p",{staticStyle:{"font-weight":"bold"}},[t._v("Data Preview:")]),a("table",{staticClass:"table"},[t._m(1),a("tbody",t._l(t.jsonData,(function(e){return a("tr",{key:e.date.toString()},[a("td",[t._v(t._s(t.dateFormat(e.date)))]),a("td",[t._v(t._s(e.desc))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.numberFormat(e.amount)))]),a("td",[t._v(t._s(e.type.name))]),a("td",[t._v(t._s(e.type.sign))]),a("td",[t._v(t._s(e.method))]),a("td",t._l(e.tags,(function(e){return a("span",{key:e},[t._v(t._s(e))])})),0),a("td",[t._v(t._s(e.notes))])])})),0)]),a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isDisabled},on:{click:function(e){return e.preventDefault(),t.importData(e)}}},[t._v("Import to Database")]),a("button",{staticClass:"btn btn-secondary",attrs:{disabled:t.isDisabled},on:{click:function(e){return e.preventDefault(),t.resetData(e)}}},[t._v("Reset")])])])},Y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"40px"}},[a("p",[t._v("Please select file:")]),a("input",{attrs:{id:"input-file",type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Date")]),a("th",[t._v("Desc")]),a("th",[t._v("Amount (THB)")]),a("th",[t._v("Type")]),a("th",[t._v("Sign")]),a("th",[t._v("Method")]),a("th",[t._v("Tag")]),a("th",[t._v("Notes")])])])}],H=(a("1276"),{props:["currentUser"],data:function(){return{username:this.currentUser,temp:[],fileElement:[],currentFile:"",jsonData:[],isDisabled:!0,allCategories:[]}},methods:{excelToJsDate:function(t){return new Date(864e5*(t-25569))},dateFormat:function(t){var e=("0"+t.getDate()).slice(-2),a=("0"+(t.getMonth()+1)).slice(-2),n=t.getFullYear();return"".concat(e,"/").concat(a,"/").concat(n)},numberFormat:function(t){return new Intl.NumberFormat("th-TH",{minimumFractionDigits:2}).format(t)},signOf:function(t){for(var e=0;e<this.allCategories.length;e++)if(this.allCategories[e].name===t)return this.allCategories[e].sign;return"invalid"},inputElement:function(){this.fileElement=document.getElementById("input-file"),this.fileElement.addEventListener("change",this.handleFile)},handleFile:function(t){var e=this;if(t.target.files.length>0){this.isDisabled=!1,console.log("now isDisabled = ".concat(this.isDisabled));var a=t.target.files[0];console.log("you've selected a file = ".concat(a.name));var n=new FileReader;n.onload=function(t){for(var n=[],s=t.target.result,o=C.a.read(s,{type:"binary"}),i=C.a.utils.sheet_to_json(o.Sheets[o.SheetNames[0]],{defval:""}),r=0;r<i.length;r++){var c={date:e.excelToJsDate(i[r].Date),desc:i[r].Desc,amount:i[r].Amount,type:{name:i[r].Type,sign:e.signOf(i[r].Type)},method:i[r].Method,tags:i[r].Tags.split(","),notes:i[r].Notes};n.push(c)}e.currentFile=a.name,e.jsonData=n},n.readAsBinaryString(a)}else console.log("no file is selected"),console.log("now isDisabled = ".concat(this.isDisabled))},importData:function(){if(this.jsonData.length>0){for(var t=this.jsonData,e=0;e<t.length;e++)l.collection("Transaction").add({date:t[e].date,desc:t[e].desc,amount:t[e].amount,type:{name:t[e].type.name,sign:t[e].type.sign},method:t[e].method,tags:t[e].tags,notes:t[e].notes,lastUpdate:new Date,createdBy:this.username});console.log("your data is successfully imported to database"),this.jsonData=[],document.getElementById("input-file").value="",this.isDisabled=!this.isDisabled,this.$router.push("/")}else console.log("your file doesn't contain valid data")},resetData:function(){console.log("you clicked reset data"),this.jsonData=[],document.getElementById("input-file").value="",this.isDisabled=!this.isDisabled,console.log("now jsonData length = ".concat(this.jsonData.length)),console.log("now isDisabled = ".concat(this.isDisabled))}},created:function(){var t=this;l.collection("itemCategories").get().then((function(e){e.forEach((function(e){var a={id:e.id,name:e.data().name,sign:e.data().sign};t.allCategories.push(a)}))}))},mounted:function(){this.inputElement()}}),V=H,W=Object(p["a"])(V,z,Y,!1,null,null,null),X=W.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("h1",[t._v("This is add categories page")]),a("div",{staticStyle:{"margin-top":"30px","margin-bottom":"30"}},[a("h5",[t._v("Add a New Category")]),a("form",{on:{submit:function(e){return t.updateCat()}}},[a("div",{staticClass:"form-group"},[a("label",[t._v("Input new category's name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.category.name,expression:"category.name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.category.name},on:{input:function(e){e.target.composing||t.$set(t.category,"name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("Nature of transaction")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.category.sign,expression:"category.sign"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.category,"sign",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Please choose nature of transaction...")]),a("option",{attrs:{value:"1"}},[t._v("Inflow")]),a("option",{attrs:{value:"-1"}},[t._v("Outflow")])])]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.resetData(e)}}},[t._v("Reset")])])]),a("div",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"}},[a("h5",[t._v("Categories List")]),a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.allCategories,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(t.signDisplay(e.sign)))]),a("td",[a("button",{staticClass:"btn btn-danger",on:{click:function(a){return a.preventDefault(),t.deleteCat(e.id)}}},[t._v("delete")])])])})),0)])])])},K=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("Name")]),a("th",[t._v("Nature")]),a("th",[t._v("Delete")])])}],Q={data:function(){return{category:{name:"",sign:""},defaultValue:{name:"",sign:""},allCategories:[]}},methods:{updateCat:function(){var t=this;console.log("You clicked submit");var e=this.allCategories.filter((function(e){return e.name===t.category.name}));e.length<1?(l.collection("itemCategories").add({name:this.category.name,sign:Number(this.category.sign)}),alert("your data is successfully updated"),this.refreshData()):console.log("duplicate")},refreshData:function(){var t=[];l.collection("itemCategories").get().then((function(e){e.forEach((function(e){var a={id:e.id,name:e.data().name,sign:e.data().sign};t.push(a)}))})),this.allCategories=t},deleteCat:function(t){var e=this;console.log("You clicked DELETE button of ".concat(t)),l.collection("itemCategories").doc(t).delete().then((function(){return e.refreshData()}))},signDisplay:function(t){return 1===t?"Inflow Transaction (+)":-1===t?"Outflow Transaction (-)":"unidentified"},resetData:function(){this.category=JSON.parse(JSON.stringify(this.defaultValue))}},created:function(){var t=this;l.collection("itemCategories").get().then((function(e){e.forEach((function(e){var a={id:e.id,name:e.data().name,sign:e.data().sign};t.allCategories.push(a)})),console.log(JSON.stringify(t.allCategories))}))}},Z=Q,tt=Object(p["a"])(Z,G,K,!1,null,null,null),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("h1",[t._v("This is manage tags page")]),a("h5",[t._v("Payment Method")]),a("div",[a("label",[t._v("Input New Method:")]),a("input",{staticClass:"form-control",attrs:{type:"text"},on:{keydown:function(e){return t.addCat(e,t.updatedCat.methods)}}}),a("div",t._l(t.updatedCat.methods,(function(e){return a("li",{key:e},[t._v(t._s(e)),a("span",{on:{click:function(a){return t.removeCat(t.updatedCat.methods,e)}}},[t._v(" (x) ")])])})),0)]),a("h5",[t._v("Tags")]),a("div",[a("label",[t._v("Input New Tags:")]),a("input",{staticClass:"form-control",attrs:{type:"text"},on:{keydown:function(e){return t.addCat(e,t.updatedCat.tags)}}}),a("div",t._l(t.updatedCat.tags,(function(e){return a("li",{key:e},[t._v(t._s(e)),a("span",[t._v(" ({{}})")]),a("span",{on:{click:function(a){return t.removeCat(t.updatedCat.tags,e)}}},[t._v(" (x) ")])])})),0)]),a("p",{staticStyle:{"margin-top":"15px"}},[t._v("previous update : "+t._s(t.currentCat.lastUpdate))]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.updateCat(e)}}},[t._v("Submit")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$router.go(-1)}}},[t._v("Cancel")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.resetData(e)}}},[t._v("Reset")])])},nt=[],st={data:function(){return{directions:["inward","outward"],currentCat:{types:[],methods:[],tags:[]},updatedCat:{types:[],methods:[],tags:[]},transactions:[]}},computed:{tagCount:function(){return null}},methods:{updateCat:function(){console.log("You clicked submit"),l.collection("Categories").doc("Categories").update({types:this.updatedCat.types,methods:this.updatedCat.methods,tags:this.updatedCat.tags,lastUpdate:new Date}),alert("your data is successfully updated"),this.$router.go("-1")},addCat:function(t,e){t.target.value.length>0&&("Enter"===t.key||","===t.key)&&(t.preventDefault(),e.includes(t.target.value)?alert("your tag is already existed = ".concat(t.target.value)):(console.log("you just added a tag = ".concat(t.target.value)),e.push(t.target.value.trim()),t.target.value="",console.log(JSON.stringify(e))))},removeCat:function(t,e){var a=t.indexOf(e);console.log("you just removed a tag = ".concat(t[a]," index = ").concat(a)),t.splice(a,1),console.log(JSON.stringify(t))},resetData:function(){this.updatedCat=JSON.parse(JSON.stringify(this.currentCat))},tagCount1:function(){var t=this;console.log("Tag counting ..."),console.log(JSON.stringify(this.updatedCat.tags)),console.log(JSON.stringify(this.transactions)),this.updatedCat.tags.forEach((function(e){var a=0;console.log(e),t.transactions.forEach((function(t){console.log(JSON.stringify(t)),console.log(t.tags),t.tags.includes(e)&&a++})),console.log("Tag [".concat(e,"] is using by ").concat(a," transactions"))}))}},created:function(){var t=this;l.collection("Categories").doc("Categories").get().then((function(e){var a={types:e.data().types,methods:e.data().methods,tags:e.data().tags,lastUpdate:""};null!=e.get("lastUpdate")&&(a.lastUpdate=e.data().lastUpdate.toDate()),t.currentCat=JSON.parse(JSON.stringify(a)),t.updatedCat=JSON.parse(JSON.stringify(a))})),l.collection("Transaction").get().then((function(e){e.forEach((function(e){var a={id:e.id,date:e.data().date.toDate(),desc:e.data().desc,amount:e.data().amount,direction:e.data().direction,type:e.data().type,method:e.data().method,tags:e.data().tags};t.transactions.push(a)}))}))}},ot=st,it=Object(p["a"])(ot,at,nt,!1,null,null,null),rt=it.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("h5",[t._v("This is manage admin page")]),a("div",{staticClass:"col-lg-8 col-md-10 col-sm-12 col-12 p-0 my-4"},[a("h6",[t._v("Admin List")]),t._l(t.userList,(function(e){return a("div",{key:e.uuid,staticClass:"card"},[a("div",{staticClass:"d-flex card-body py-1"},[a("div",{staticClass:"col-4 p-0 my-auto"},[t._v(" "+t._s(e.username)+" ")]),a("div",{staticClass:"col-4 p-0 my-auto"},[t._v(" "+t._s(e.admin)+" ")]),a("div",{staticClass:"col-4 p-0 my-auto text-right"},[e.admin?t._e():a("button",{staticClass:"btn btn-primary w-100",on:{click:function(a){return a.preventDefault(),t.adminMake(e.username)}}},[t._v("Make Admin")]),e.admin?a("button",{staticClass:"btn btn-danger w-100",on:{click:function(a){return a.preventDefault(),t.adminRemove(e.username)}}},[t._v("Remove Admin")]):t._e()])])])}))],2)])},lt=[],ut={data:function(){return{userList:[]}},computed:{},methods:{adminMake:function(t){var e=this;l.collection("Users").doc(t).update({admin:!0}).then((function(){e.refreshList()}))},adminRemove:function(t){var e=this;l.collection("Users").doc(t).update({admin:!1}).then((function(){e.refreshList()}))},refreshList:function(){var t=this;this.userList=[],l.collection("Users").get().then((function(e){e.forEach((function(e){var a={username:e.id,uuid:e.data().uuid,email:e.data().email,admin:e.data().admin};t.userList.push(a)}))}))}},created:function(){this.refreshList()}},dt=ut,mt=Object(p["a"])(dt,ct,lt,!1,null,null,null),pt=mt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("div",{staticClass:"col-lg-6 col-md-6 col-sm-8 col-10 mx-auto"},[a("h5",{staticStyle:{"text-align":"center"}},[t._v("Log In")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.loginUser(e)}}},[a("div",{staticClass:"form-group"},[a("label",[t._v("Email: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("Password:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Login")])]),a("div",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[t._v("No account ? Please "),a("router-link",{attrs:{to:"/signup"}},[t._v("sign up")])],1)])])},gt=[],ft={data:function(){return{email:null,password:null}},methods:{loginUser:function(){var t=this;u.signInWithEmailAndPassword(this.email,this.password).catch((function(t){console.log("Error = Code:".concat(t.code)),console.log("".concat(t.message))})).then((function(e){console.log(e),t.$router.replace("/")}))}}},ht=ft,yt=Object(p["a"])(ht,vt,gt,!1,null,null,null),bt=yt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("div",{staticClass:"col-lg-6 col-md-6 col-sm-8 col-10 mx-auto"},[a("h5",{staticStyle:{"text-align":"center"}},[t._v("Sign Up")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.signupUser(e)}}},[a("div",{staticClass:"form-group"},[a("label",[t._v("Username: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.username},on:{blur:function(e){return t.checkUsername()},focus:function(){return t.duplicateUsername=!1},input:function(e){e.target.composing||(t.username=e.target.value)}}}),t.duplicateUsername?a("div",{staticStyle:{color:"red"}},[t._v("Username '"+t._s(t.username)+"' has already been used.")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",[t._v("Email: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",required:""},domProps:{value:t.email},on:{blur:function(e){return t.checkEmail()},focus:function(){return t.duplicateEmail=!1},input:function(e){e.target.composing||(t.email=e.target.value)}}}),t.duplicateEmail?a("div",{staticStyle:{color:"red"}},[t._v("Email '"+t._s(t.email)+"' has already been used.")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",[t._v("Password:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"pwBox",minlength:"6",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showpass"},on:{click:function(e){return t.showPassword()}}}),a("label",{staticClass:"form-check-label",attrs:{for:"showpass"}},[t._v("show password")])])]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Signup")])]),a("div",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[t._v("Back to "),a("router-link",{attrs:{to:"/login"}},[t._v("Login")])],1)])])},Ct=[],wt={data:function(){return{username:null,email:null,password:null,usernameList:[],emailList:[],duplicateUsername:null,duplicateEmail:null}},methods:{checkUsername:function(){this.duplicateUsername=this.usernameList.includes(this.username)},checkEmail:function(){this.duplicateEmail=this.emailList.includes(this.email)},showPassword:function(){var t=document.getElementById("pwBox");"password"===t.type?t.type="text":t.type="password"},signupUser:function(){var t=this;this.duplicateUsername||this.duplicateEmail||u.createUserWithEmailAndPassword(this.email,this.password).catch((function(t){console.log("Error = Code:".concat(t.code)),console.log("".concat(t.message))})).then((function(){var e={uuid:u.currentUser.uid,username:t.username,email:t.email,password:t.password,admin:!1};l.collection("Users").doc(t.username).set(e).then((function(){console.log(e),t.$router.replace("/")}))}))}},created:function(){var t=this;l.collection("Users").get().then((function(e){e.forEach((function(e){t.usernameList.push(e.id),t.emailList.push(e.data().email)}))}))}},Dt=wt,xt=Object(p["a"])(Dt,_t,Ct,!1,null,null,null),kt=xt.exports,Tt=[{path:"/",component:k,meta:{requiresAuth:!0}},{path:"/add",component:U,meta:{requiresAuth:!0}},{path:"/view/:id",component:$,meta:{requiresAuth:!0}},{path:"/view/:id/edit",component:R,meta:{requiresAuth:!0}},{path:"/upload",component:X,meta:{requiresAuth:!0}},{path:"/categories",component:et,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/tags",component:rt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin",component:pt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/login",component:bt},{path:"/signup",component:kt}],St=new n["a"];n["a"].config.productionTip=!1,n["a"].use(f["a"]);var Et,Nt=new f["a"]({routes:Tt});Nt.beforeEach((function(t,e,a){var n=t.matched.some((function(t){return t.meta.requiresAuth})),s=t.matched.some((function(t){return t.meta.requiresAdmin})),o=u.currentUser,i=null;n&&!o?a("/login"):s?l.collection("Users").where("uuid","==",u.currentUser.uid).get().then((function(t){t.forEach((function(t){i=t.data().admin})),console.log("Admin status",i),i?a():(alert("you are not admin"),a(e))})):a()})),u.onAuthStateChanged((function(t){console.log("user",t),Et||(Et=new n["a"]({render:function(t){return t(g)},router:Nt}).$mount("#app"))}))},"85ec":function(t,e,a){},"95b9":function(t,e,a){},ca95:function(t,e,a){"use strict";var n=a("95b9"),s=a.n(n);s.a}});
//# sourceMappingURL=app.f4f95696.js.map